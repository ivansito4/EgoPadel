@model IEnumerable<EgoPadel.Models.Equipo>

@{
    ViewData["Title"] = "View";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>


</head>
<h1> Buscar </h1>

<p >
    <a asp-action = "Create" > Create New </a>
</p >
<table class= "table" >
    <thead >
        <tr >
            <th >
                Nombre
            </ th >
            <th >
                Escudo
            </th >
            <th >
                Puntos
            </th >
            <th ></ th >
        </tr >
    </thead >
    <tbody id = "tbody" >
        <form asp-action="Unirse" asp-controller="Equipo">
            <input type="hidden" name="unirse" id="valor"/>
            <button type="submit" class= "btn btn-primary" id="unirseBoton" >UNIRSE</button>
        </form>
    </tbody>
</table>
<script>
    function insertarEquipos() {
    let equipos = @Html.Raw(Json.Serialize(ViewBag.Reservas))
            let listaEquipos = JSON.parse(equipos);

    for (let i = 1; i < listaEquipos.length; i++)
    {

        if (listaEquipos[i].Id == listaEquipos[i - 1].Id)
        {
            delete(listaEquipos[i]);
            delete(listaEquipos[i - 1]);
        }
    }

    listaEquipos.forEach(function(equipo) {
        let tbody = document.getElementById("tbody");

        let row = document.createElement("tr");
        tbody.appendChild(row);

        let colNombre = document.createElement("td");
        colNombre.innerHTML = equipo.Nombre
            row.appendChild(colNombre);

        let colFoto = document.createElement("td");
        let foto = document.createElement("img");
        foto.src = '/images/Equipos/' + equipo.FotoEscudo;
        foto.width = 50;
        colFoto.appendChild(foto);
        row.appendChild(colFoto);

        let colPuntos = document.createElement("td");
        colPuntos.innerHTML = equipo.Puntos
            row.appendChild(colPuntos);

        let colBoton = document.createElement("td");

        let boton = document.getElementById('unirseBoton');
        colBoton.appendChild(boton);
        row.appendChild(colBoton);

        let valorId=document.getElementById("valor");
        valorId.value=equipo.Id;
    })

    }
    console.log(@ViewBag.idEquipo);
window.onload = insertarEquipos();
</script>

